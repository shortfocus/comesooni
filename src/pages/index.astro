---
import Layout from "../layouts/Layout.astro";
import Footprints from "../components/animation/Footprints.astro";

// 가상 데이터 (추후 D1에서 가져올 예정)
const photos = [
  {
    id: 1,
    url: "https://via.placeholder.com/600x800",
    title: "산책 중인 깜순이",
  },
  { id: 2, url: "https://via.placeholder.com/800x600", title: "잠자는 깜순이" },
  {
    id: 3,
    url: "https://via.placeholder.com/700x900",
    title: "간식 먹는 깜순이",
  },
];
---

<Layout title="깜순이 | Kkamsoon Archive">
  <Footprints />

  <section
    class="h-screen flex items-center justify-center sticky top-0 bg-[#0A0A0A] z-10"
  >
    <h1
      id="hero-text"
      class="text-9xl font-black tracking-tighter uppercase select-none"
    >
      Kkamsoon
    </h1>
  </section>

  <section
    id="horizontal-gallery"
    class="relative h-[400vh] bg-white text-black"
  >
    <div class="sticky top-0 h-screen flex items-center overflow-hidden">
      <div id="gallery-track" class="flex gap-10 px-[10vw]">
        {
          photos.map((photo) => (
            <div class="flex-shrink-0 w-[60vw] md:w-[30vw] h-[60vh] bg-gray-200 rounded-2xl overflow-hidden shadow-2xl">
              <img
                src={photo.url}
                alt={photo.title}
                class="w-full h-full object-cover"
              />
            </div>
          ))
        }
      </div>
    </div>
  </section>

  <footer
    class="h-screen flex flex-col items-center justify-center bg-[#0A0A0A] text-white/50"
  >
    <p class="text-xl">Love you, Kkamsoon</p>
    <a
      href="https://instagram.com/kkamsoon"
      class="mt-4 hover:text-white transition-colors">Follow on Instagram</a
    >
  </footer>

  <script>
    import { gsap } from "gsap";
    import { ScrollTrigger } from "gsap/ScrollTrigger";
    gsap.registerPlugin(ScrollTrigger);

    // 가로 스크롤 애니메이션
    const track = document.querySelector("#gallery-track");
    gsap.to(track, {
      x: () =>
        -(track!.scrollWidth - window.innerWidth + window.innerWidth * 0.2),
      ease: "none",
      scrollTrigger: {
        trigger: "#horizontal-gallery",
        start: "top top",
        end: "bottom bottom",
        scrub: 1,
        invalidateOnRefresh: true,
      },
    });

    // 히어로 텍스트 페이드아웃 효과
    gsap.to("#hero-text", {
      opacity: 0,
      scale: 2,
      scrollTrigger: {
        trigger: "#horizontal-gallery",
        start: "top bottom",
        end: "top top",
        scrub: true,
      },
    });
  </script>
</Layout>
